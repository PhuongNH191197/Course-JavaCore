# Tạo Stream như thế nào?

- Từ các class con của Collection thông qua phương thức `stream()` và `parallelStream()`.
- Từ 1 mảng bằng cách sử dụng `Arrays.stream(Object[])`.
- Từ các dòng của 1 file thông qua `BufferedReader.lines()`.
- Hoặc từ các method của class Files.

## 1. Tạo Stream từ các class con của Collection (List)

```java
List<String> items = new ArrayList<String>();
    items.add("one");
    items.add("two");
    items.add("three");
    items.add("fore");
    items.add("five");

// thông qua stream()
Stream<String> stream = items.stream();

// thông qua parallelStream()
Stream<String> stream = items.parallelStream();
```

## 2. Tạo Stream từ Arrays

In Java 8, you can either use `Arrays.stream` or `Stream.of` to convert an `Array` into a `Stream`.

### Object Arrays
*For object arrays, both `Arrays.stream` and `Stream.of` returns the same output.*
```java
String[] array = {"a", "b", "c", "d", "e"};

// Arrays.stream
Stream<String> stream1 = Arrays.stream(array);
stream1.forEach(System.out::println);

// Stream.of
Stream<String> stream2 = Stream.of(array);
stream2.forEach(System.out::println);
```
Review the JDK source code.
#### *Arrays.java*
```java
/**
 * Returns a sequential {@link Stream} with the specified array as its
 * source.
 *
 * @param <T> The type of the array elements
 * @param array The array, assumed to be unmodified during use
 * @return a {@code Stream} for the array
 * @since 1.8
 */
public static <T> Stream<T> stream(T[] array) {
    return stream(array, 0, array.length);
}
```
#### *Stream.java*
```java
/**
 * Returns a sequential ordered stream whose elements are the specified values.
 *
 * @param <T> the type of stream elements
 * @param values the elements of the new stream
 * @return the new stream
 */
@SafeVarargs
@SuppressWarnings("varargs") // Creating a stream from an array is safe
public static<T> Stream<T> of(T... values) {
    return Arrays.stream(values);
}
```
> Note: For object arrays, the `Stream.of` method is calling the `Arrays.stream` internally.

### Primitive Arrays
*For primitive array, the `Arrays.stream` and `Stream.of` will return different output.*
```java
int[] intArray = {1, 2, 3, 4, 5};

// 1. Arrays.stream -> IntStream 
IntStream intStream1 = Arrays.stream(intArray);
intStream1.forEach(x -> System.out.println(x));

// 2. Stream.of -> Stream<int[]>
Stream<int[]> temp = Stream.of(intArray);

// Cant print Stream<int[]> directly, convert / flat it to IntStream 
IntStream intStream2 = temp.flatMapToInt(x -> Arrays.stream(x));
intStream2.forEach(x -> System.out.println(x));
```

### 3. BufferedReader + Stream
*A new method `lines()` has been added since 1.8, it lets `BufferedReader` returns content as `Stream`.*
```java
String fileName = "c://lines.txt";
List<String> list = new ArrayList<>();

try (BufferedReader br = Files.newBufferedReader(Paths.get(fileName))) {

    //br returns as stream and convert it into a List
    list = br.lines().collect(Collectors.toList());

} catch (IOException e) {
    e.printStackTrace();
}

list.forEach(System.out::println);
```
